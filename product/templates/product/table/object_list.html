{% load utils %}
<form method="GET" action="">
<div class="col pull-right" style="padding-bottom: 10px;">
    <button type="submit" class="btn btn-default">LÃ¶schen</button>
</div>
{% for object, stock in object_list_zip %}
    <tr>
        <td class="col-md-1"><a href="{{ object.id }}">Ansicht</a>
            <a href="{{ object.id }}/edit">Bearbeiten</a>
            <input type="checkbox" name="item" value="{{object.pk}}">
        </td>
        <td class="show_hide" style="cursor:pointer;">
            <a collapseid="collapse_{{ forloop.counter }}">
                <span class="glyphicon glyphicon-chevron-down"></span>
            </a>
        </td>
            <td>
                {% if object.main_image %}
                    <img src="{{ object.main_image.url|default:''}}" width="50px" height="50px">
                {% endif %}
            </td>
            <td> {{ object.ean}} </td>
            <td> {{ object.manufacturer}} </td>
            <td> {{ object.brandname}} </td>
            <td> {{ object.part_number}} </td>
            <td> {{ object.title}} </td>
            <td> {{ stock }} </td>
    </tr>
  <tr id="collapse_{{ forloop.counter }}" class="collapse">
      <td colspan="12">
          <p>
              <b>Bestand: </b> {{ stock }}
          </p>
          {% if object.short_description %}
              <p><b>Kurzbeschreibung: </b><br/> {{ object.short_description}}</p>
          {% endif %}
          {% if object.description %}
              <p><b>Beschreibung: </b><br/> {{ object.description}}</p>
          {% endif %}
      </td>
  </tr>
{% endfor %}
</form>

<script>
    var show_hide_elements = document.getElementsByClassName("show_hide");

    for(var i = 0; i<show_hide_elements.length; i++){
        var show_hide_element = show_hide_elements[i];


        show_hide_element.onclick = function(e){
           var a_element = this.getElementsByTagName("a")[0];

           var show_or_hide_element = this.getElementsByTagName("span")[0];

           flip_down_up(show_or_hide_element);

           $(document.getElementById(a_element.getAttribute("collapseid"))).collapse("toggle")



        }
    }

    var flip_down_up = function(el){
           if(el.className.includes("chevron-down")){
               el.className = el.className.replace("chevron-down", "chevron-up");
           }else{
              el.className = el.className.replace("chevron-up", "chevron-down");
           }
    };

</script>